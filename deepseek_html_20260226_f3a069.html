<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alma ¬∑ Salud Mental B2B</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400;1,600&family=Jost:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* === DESIGN TOKENS === */
        *,
        *::before,
        *::after { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Jost', sans-serif;
            background: #f6f1e7;
            color: #1b3329;
            -webkit-font-smoothing: antialiased;
        }
        .serif { font-family: 'Cormorant Garamond', serif; }
        ::-webkit-scrollbar { width: 5px; height: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #a8d4b4; border-radius: 3px; }
        button { font-family: 'Jost', sans-serif; }
        input, select, textarea { font-family: 'Jost', sans-serif; }

        /* ANIMACIONES */
        @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideIn { from { opacity: 0; transform: translateX(16px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes float { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes pulse { 0%,100% { opacity: .5; transform: scale(1); } 50% { opacity: .9; transform: scale(1.06); } }
        @keyframes toastIn { from { opacity: 0; transform: translateY(20px) scale(.96); } to { opacity: 1; transform: translateY(0) scale(1); } }
        @keyframes toastOut { from { opacity: 1; transform: translateY(0); } to { opacity: 0; transform: translateY(10px); } }
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes progressFill { from { width: 0; } to { width: var(--w); } }
        .fade-up { animation: fadeUp .55s ease both; }
        .fade-in { animation: fadeIn .4s ease both; }
        .slide-in { animation: slideIn .35s ease both; }
        .float { animation: float 5s ease-in-out infinite; }
        .pulse-glow { animation: pulse 3.5s ease-in-out infinite; }

        /* BOTONES */
        .btn {
            display: inline-flex; align-items: center; justify-content: center; gap: 7px;
            border: none; cursor: pointer; font-family: 'Jost', sans-serif; font-weight: 600;
            letter-spacing: .3px; transition: all .22s; border-radius: 100px; line-height: 1;
        }
        .btn:active { transform: scale(.97) !important; }
        .btn-primary { background: #5fa87c; color: #fff; padding: 12px 26px; font-size: 14px; }
        .btn-primary:hover { background: #2d5a46; box-shadow: 0 8px 22px rgba(27,51,41,.22); transform: translateY(-1px); }
        .btn-dark { background: #1b3329; color: #fff; padding: 12px 26px; font-size: 14px; }
        .btn-dark:hover { background: #234437; box-shadow: 0 8px 22px rgba(27,51,41,.3); transform: translateY(-1px); }
        .btn-outline {
            background: transparent; color: #1b3329; padding: 11px 24px; font-size: 14px;
            border: 1.5px solid rgba(27,51,41,.18);
        }
        .btn-outline:hover { border-color: #5fa87c; color: #5fa87c; }
        .btn-white { background: #fff; color: #1b3329; padding: 12px 26px; font-size: 14px; }
        .btn-white:hover { box-shadow: 0 8px 24px rgba(0,0,0,.14); transform: translateY(-1px); }
        .btn-ghost { background: transparent; color: #7a9589; padding: 9px 16px; font-size: 13px; border-radius: 10px; font-weight: 500; }
        .btn-ghost:hover { background: rgba(95,168,124,.1); color: #1b3329; }
        .btn-icon { background: transparent; border: none; cursor: pointer; padding: 8px; border-radius: 9px; display: inline-flex; align-items: center; justify-content: center; transition: all .18s; }
        .btn-icon:hover { background: rgba(27,51,41,.07); }
        .btn-sm { padding: 8px 16px; font-size: 12px; }
        .btn-danger { background: #fbeaea; color: #d45f5f; padding: 9px 18px; font-size: 13px; }
        .btn-danger:hover { background: #d45f5f; color: #fff; }
        .btn-sage-light { background: rgba(95,168,124,.12); color: #2d5a46; padding: 9px 18px; font-size: 13px; }
        .btn-sage-light:hover { background: rgba(95,168,124,.22); }

        /* FORMULARIOS */
        .field {
            width: 100%; padding: 11px 15px; border: 1.5px solid rgba(27,51,41,.14);
            border-radius: 11px; font-size: 14px; color: #1b3329; background: #fff;
            outline: none; transition: border-color .2s, box-shadow .2s;
        }
        .field:focus { border-color: #5fa87c; box-shadow: 0 0 0 3px rgba(95,168,124,.12); }
        .field::placeholder { color: #a3bdb0; }
        .field-label { font-size: 12px; font-weight: 600; color: #7a9589; letter-spacing: .5px; text-transform: uppercase; margin-bottom: 6px; display: block; }
        .form-group { display: flex; flex-direction: column; gap: 2px; }
        select.field { cursor: pointer; }
        textarea.field { resize: vertical; min-height: 90px; }

        /* TARJETAS */
        .card { background: #fff; border-radius: 18px; border: 1px solid rgba(27,51,41,.07); }
        .card-hover { transition: transform .25s, box-shadow .25s; }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 14px 40px rgba(27,51,41,.1); }
        .card-active { border: 1.5px solid #5fa87c !important; background: rgba(95,168,124,.03) !important; }

        /* BADGES */
        .badge {
            display: inline-flex; align-items: center; gap: 5px; padding: 4px 11px;
            border-radius: 100px; font-size: 11px; font-weight: 600; letter-spacing: .4px;
        }
        .badge-green { background: rgba(95,168,124,.13); color: #2d5a46; }
        .badge-amber { background: rgba(200,134,62,.13); color: #c8863e; }
        .badge-red { background: rgba(212,95,95,.13); color: #d45f5f; }
        .badge-blue { background: rgba(74,144,164,.13); color: #4a90a4; }
        .badge-forest { background: rgba(27,51,41,.08); color: #1b3329; }

        /* PROGRESO */
        .prog-track { height: 5px; background: rgba(95,168,124,.12); border-radius: 3px; overflow: hidden; }
        .prog-fill { height: 100%; border-radius: 3px; transition: width 1.1s cubic-bezier(.4,0,.2,1); }

        /* TABLAS */
        .tbl { width: 100%; border-collapse: collapse; }
        .tbl th { font-size: 11px; font-weight: 600; letter-spacing: .8px; text-transform: uppercase; color: #a3bdb0; padding: 10px 16px; text-align: left; border-bottom: 1px solid rgba(27,51,41,.07); }
        .tbl td { padding: 13px 16px; font-size: 13px; color: #1b3329; border-bottom: 1px solid rgba(27,51,41,.05); }
        .tbl tr:hover td { background: rgba(246,241,231,.7); }
        .tbl tr:last-child td { border-bottom: none; }

        /* MODAL */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(14,30,24,.55); backdrop-filter: blur(6px);
            z-index: 900; display: flex; align-items: center; justify-content: center; padding: 20px;
            animation: fadeIn .25s ease;
        }
        .modal-box {
            background: #fff; border-radius: 22px; padding: 32px; max-width: 520px;
            width: 100%; max-height: 90vh; overflow-y: auto; animation: fadeUp .3s ease;
        }
        .modal-lg { max-width: 680px; }
        .modal-title { font-family: 'Cormorant Garamond', serif; font-size: 24px; font-weight: 700; color: #1b3329; margin-bottom: 6px; }
        .modal-sub { font-size: 13px; color: #7a9589; margin-bottom: 24px; }

        /* TOAST */
        .toast-wrap {
            position: fixed; bottom: 28px; right: 28px; z-index: 9999;
            display: flex; flex-direction: column; gap: 10px; pointer-events: none;
        }
        .toast {
            pointer-events: auto; min-width: 300px; max-width: 380px; background: #fff;
            border-radius: 14px; padding: 14px 18px; display: flex; align-items: flex-start;
            gap: 12px; box-shadow: 0 8px 32px rgba(14,30,24,.16); border-left: 4px solid #5fa87c;
            animation: toastIn .35s ease;
        }
        .toast-success { border-color: #5fa87c; }
        .toast-error { border-color: #d45f5f; }
        .toast-warn { border-color: #c8863e; }
        .toast-info { border-color: #4a90a4; }
        .toast-icon {
            width: 32px; height: 32px; border-radius: 9px; display: flex;
            align-items: center; justify-content: center; flex-shrink: 0; font-size: 16px;
        }
        .toast-icon-success { background: rgba(95,168,124,.12); }
        .toast-icon-error { background: #fbeaea; }
        .toast-icon-warn { background: #fdf3e7; }
        .toast-icon-info { background: #e8f4f8; }
        .toast-content .toast-title { font-size: 13px; font-weight: 600; color: #1b3329; }
        .toast-content .toast-msg { font-size: 12px; color: #7a9589; margin-top: 2px; line-height: 1.5; }
        .toast-close { margin-left: auto; background: none; border: none; cursor: pointer; color: #a3bdb0; font-size: 16px; line-height: 1; padding: 2px; }

        /* NAVEGACI√ìN */
        .nav-item { font-size: 13px; font-weight: 500; color: rgba(27,51,41,.55); cursor: pointer; padding: 6px 2px; border-bottom: 2px solid transparent; transition: all .2s; white-space: nowrap; }
        .nav-item:hover { color: #1b3329; }
        .nav-item.active { color: #1b3329; border-color: #5fa87c; }

        .snav-item {
            display: flex; align-items: center; gap: 10px; padding: 10px 13px;
            border-radius: 11px; cursor: pointer; font-size: 13px; font-weight: 500;
            color: #7a9589; transition: all .18s; border: none; background: transparent;
            width: 100%; text-align: left;
        }
        .snav-item:hover { background: rgba(95,168,124,.08); color: #1b3329; }
        .snav-item.active { background: rgba(95,168,124,.13); color: #1b3329; font-weight: 600; }

        /* NOTIFICACI√ìN */
        .notif-dot { position: absolute; top: 5px; right: 5px; width: 8px; height: 8px; border-radius: 50%; background: #d45f5f; border: 2px solid #fff; }

        /* STAT CARD */
        .stat-card { background: #fff; border-radius: 16px; padding: 20px; border: 1px solid rgba(27,51,41,.07); }
        .stat-value { font-family: 'Cormorant Garamond', serif; font-size: 36px; font-weight: 700; color: #1b3329; line-height: 1; }
        .stat-label { font-size: 11px; font-weight: 600; letter-spacing: .6px; text-transform: uppercase; color: #a3bdb0; margin-top: 5px; }
        .stat-delta { font-size: 12px; font-weight: 500; margin-top: 6px; }
        .delta-up { color: #5fa87c; }
        .delta-down { color: #d45f5f; }

        /* DROPDOWN */
        .dropdown { position: relative; display: inline-flex; }
        .dropdown-menu {
            position: absolute; top: calc(100% + 8px); right: 0; background: #fff;
            border-radius: 14px; box-shadow: 0 12px 40px rgba(14,30,24,.16);
            border: 1px solid rgba(27,51,41,.07); min-width: 180px; z-index: 500;
            animation: fadeUp .2s ease; overflow: hidden;
        }
        .dropdown-item { display: flex; align-items: center; gap: 10px; padding: 11px 16px; font-size: 13px; color: #1b3329; cursor: pointer; transition: background .15s; }
        .dropdown-item:hover { background: #f6f1e7; }
        .dropdown-sep { height: 1px; background: rgba(27,51,41,.06); margin: 4px 0; }

        /* TOOLTIP */
        .tip { position: relative; }
        .tip::after {
            content: attr(data-tip); position: absolute; bottom: calc(100%+7px); left: 50%;
            transform: translateX(-50%); background: #1b3329; color: #fff; font-size: 11px;
            font-weight: 500; padding: 5px 10px; border-radius: 7px; white-space: nowrap;
            pointer-events: none; opacity: 0; transition: opacity .18s;
        }
        .tip:hover::after { opacity: 1; }

        /* AVATAR */
        .avatar { border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0; }

        /* SWITCH */
        .switch { position: relative; display: inline-flex; align-items: center; cursor: pointer; gap: 10px; }
        .switch input { opacity: 0; width: 0; height: 0; position: absolute; }
        .switch-track { width: 40px; height: 22px; background: rgba(27,51,41,.15); border-radius: 11px; transition: background .22s; position: relative; }
        .switch input:checked + .switch-track { background: #5fa87c; }
        .switch-thumb {
            position: absolute; top: 3px; left: 3px; width: 16px; height: 16px;
            background: #fff; border-radius: 50%; transition: transform .22s;
            box-shadow: 0 1px 4px rgba(0,0,0,.2);
        }
        .switch input:checked ~ .switch-thumb,
        .switch input:checked + .switch-track + .switch-thumb { transform: translateX(18px); }

        /* CHART AXIS */
        .chart-axis { font-size: 10px; fill: #a3bdb0; }

        /* UTILIDADES */
        .hidden { display: none !important; }
        .flex { display: flex; }
        .grid { display: grid; }
        .text-center { text-align: center; }
        .mt-4 { margin-top: 4px; }
        .mb-4 { margin-bottom: 4px; }
        .w-full { width: 100%; }
        .cursor-pointer { cursor: pointer; }
    </style>
</head>
<body>
    <div id="app"></div>
    <div id="toast-wrap" class="toast-wrap"></div>
    <div id="modal-container"></div>

    <script>
        // ------------------------------------------------------------
        // CONSTANTES Y DATOS MOCK
        // ------------------------------------------------------------
        const COLORS = {
            forest: "#1b3329", forestMid: "#234437", forestLight: "#2d5a46",
            sage: "#5fa87c", sageMid: "#7dbf94", sageLight: "#a8d4b4",
            cream: "#f6f1e7", creamDark: "#ede6d4", creamMid: "#f0ead9",
            amber: "#c8863e", amberLight: "#e4ab6a",
            slate: "#7a9589", slateLight: "#a3bdb0",
            white: "#ffffff", dark: "#0e1e18",
            danger: "#d45f5f", dangerLight: "#fbeaea",
            warn: "#c8863e", warnLight: "#fdf3e7",
            info: "#4a90a4", infoLight: "#e8f4f8",
        };

        const DEPTS = [
            { id: 1, name: "Tecnolog√≠a",   score: 81, employees: 45,  risk: "bajo",  trend: +4, sessions: 18, burnout: 12 },
            { id: 2, name: "Comercial",    score: 56, employees: 120, risk: "alto",  trend: -9, sessions: 52, burnout: 41 },
            { id: 3, name: "Operaciones",  score: 74, employees: 89,  risk: "medio", trend: +1, sessions: 31, burnout: 22 },
            { id: 4, name: "Finanzas",     score: 79, employees: 34,  risk: "bajo",  trend: +6, sessions: 11, burnout: 8  },
            { id: 5, name: "RR.HH.",       score: 84, employees: 18,  risk: "bajo",  trend: +3, sessions: 7,  burnout: 4  },
            { id: 6, name: "Legal",        score: 68, employees: 12,  risk: "medio", trend: -2, sessions: 5,  burnout: 9  },
        ];

        const THERAPISTS = [
            { id: 1, name: "Dra. Ana Garc√≠a",    spec: "Estr√©s laboral ¬∑ Burnout",      rating: 4.9, sessions: 312, avatar: "AG", color: "#7dbf94", exp: "8 a√±os", lang: "Espa√±ol, Ingl√©s" },
            { id: 2, name: "Dr. Carlos L√≥pez",   spec: "Ansiedad ¬∑ Depresi√≥n",          rating: 4.8, sessions: 280, avatar: "CL", color: "#5fa87c", exp: "11 a√±os", lang: "Espa√±ol" },
            { id: 3, name: "Dra. Sof√≠a Torres",  spec: "Burnout ¬∑ Transiciones",        rating: 4.9, sessions: 354, avatar: "ST", color: "#a8d4b4", exp: "9 a√±os", lang: "Espa√±ol, Portugu√©s" },
            { id: 4, name: "Dr. Mateo Ruiz",     spec: "Relaciones ¬∑ Conflicto",        rating: 4.7, sessions: 198, avatar: "MR", color: "#2d5a46", exp: "6 a√±os", lang: "Espa√±ol" },
            { id: 5, name: "Dra. Valentina M.",  spec: "Trauma ¬∑ Duelo",                rating: 4.8, sessions: 265, avatar: "VM", color: "#234437", exp: "13 a√±os", lang: "Espa√±ol, Ingl√©s" },
        ];

        const SESSIONS = [
            { id: 1, emp: "Laura M.",   dept: "Comercial",   time: "Hoy 10:00 AM",   th: "Dra. Ana Garc√≠a",   status: "confirmada", type: "Virtual",    av: "LM" },
            { id: 2, emp: "Carlos R.",  dept: "Operaciones", time: "Hoy 2:30 PM",    th: "Dr. Carlos L√≥pez",  status: "pendiente",  type: "Presencial",  av: "CR" },
            { id: 3, emp: "Ana P.",     dept: "Comercial",   time: "Ma√±ana 9:00 AM", th: "Dra. Sof√≠a Torres", status: "confirmada", type: "Virtual",    av: "AP" },
            { id: 4, emp: "Miguel V.",  dept: "Legal",       time: "Ma√±ana 11:00 AM",th: "Dr. Mateo Ruiz",    status: "confirmada", type: "Presencial",  av: "MV" },
            { id: 5, emp: "Sara L.",    dept: "Finanzas",    time: "Jue 10:30 AM",   th: "Dra. Valentina M.", status: "confirmada", type: "Virtual",    av: "SL" },
            { id: 6, emp: "Tom√°s H.",   dept: "Comercial",   time: "Jue 3:00 PM",    th: "Dra. Ana Garc√≠a",   status: "cancelada",  type: "Virtual",    av: "TH" },
        ];

        const SLOTS = [
            { day: "Hoy",    time: "4:00 PM",  th: THERAPISTS[0], available: true  },
            { day: "Hoy",    time: "6:00 PM",  th: THERAPISTS[1], available: true  },
            { day: "Ma√±ana", time: "9:00 AM",  th: THERAPISTS[0], available: true  },
            { day: "Ma√±ana", time: "2:30 PM",  th: THERAPISTS[2], available: true  },
            { day: "Jue 12", time: "10:00 AM", th: THERAPISTS[3], available: false },
            { day: "Jue 12", time: "3:00 PM",  th: THERAPISTS[4], available: true  },
        ];

        const RESOURCES = [
            { icon: "üßò", title: "Meditaci√≥n para el estr√©s", sub: "Guiada ¬∑ 8 min", tag: "Audio", time: "8 min" },
            { icon: "üìì", title: "Diario de emociones", sub: "Reflexi√≥n estructurada", tag: "Ejercicio", time: "10 min" },
            { icon: "üí®", title: "T√©cnica de respiraci√≥n 4-7-8", sub: "Calma inmediata", tag: "Respiraci√≥n", time: "3 min" },
            { icon: "üåô", title: "Gu√≠a de higiene del sue√±o", sub: "Mejora tu descanso", tag: "Lectura", time: "12 min" },
            { icon: "üèÉ", title: "Activaci√≥n f√≠sica express", sub: "5 ejercicios simples", tag: "Ejercicio", time: "7 min" },
            { icon: "üéØ", title: "Foco y concentraci√≥n", sub: "T√©cnica Pomodoro guiada", tag: "Productividad", time: "25 min" },
        ];

        const NOTIFS = [
            { id: 1, icon: "alert", color: COLORS.danger, title: "Alerta: Departamento Comercial", msg: "Se√±ales de burnout elevado detectadas esta semana.", time: "hace 2h", read: false },
            { id: 2, icon: "cal",   color: COLORS.sage,   title: "Sesi√≥n confirmada", msg: "Ana P. confirm√≥ su sesi√≥n para ma√±ana 9:00 AM.", time: "hace 3h", read: false },
            { id: 3, icon: "trend", color: COLORS.info,   title: "Reporte mensual listo", msg: "El informe de junio est√° disponible para descargar.", time: "hace 5h", read: true  },
            { id: 4, icon: "users", color: COLORS.amber,  title: "5 empleados nuevos incorporados", msg: "Pendiente de completar evaluaci√≥n inicial.", time: "ayer",    read: true  },
        ];

        // ------------------------------------------------------------
        // ESTADO GLOBAL
        // ------------------------------------------------------------
        let currentView = 'landing'; // 'landing', 'empresa', 'empleado'
        let toasts = [];
        let modals = {
            newEval: false,
            export: false,
            dept: null,
            session: null,
            therapist: null,
            resource: null,
            bookingConfirm: false,
        };
        let selectedSlotIndex = null;
        let unreadNotifs = NOTIFS.filter(n => !n.read).length;
        let alerts = [
            { id: 1, dept: "Comercial", msg: "Se√±ales elevadas de burnout detectadas esta semana. Recomendamos intervenci√≥n." },
            { id: 2, dept: "Legal", msg: "Baja tasa de adopci√≥n (42%). 7 empleados sin evaluaci√≥n inicial." }
        ];

        // ------------------------------------------------------------
        // FUNCIONES AUXILIARES
        // ------------------------------------------------------------
        function renderApp() {
            const app = document.getElementById('app');
            if (currentView === 'landing') app.innerHTML = renderLanding();
            else if (currentView === 'empresa') app.innerHTML = renderHRDashboard();
            else if (currentView === 'empleado') app.innerHTML = renderEmployeePortal();
            attachEvents();
            renderToasts();
            renderModals();
        }

        function setView(view) {
            currentView = view;
            renderApp();
        }

        // TOAST
        function toast(type, title, msg) {
            const id = Date.now();
            toasts.push({ id, type, title, msg });
            renderToasts();
            setTimeout(() => {
                toasts = toasts.filter(t => t.id !== id);
                renderToasts();
            }, 3800);
        }

        function removeToast(id) {
            toasts = toasts.filter(t => t.id !== id);
            renderToasts();
        }

        function renderToasts() {
            const wrap = document.getElementById('toast-wrap');
            if (!wrap) return;
            wrap.innerHTML = toasts.map(t => `
                <div class="toast toast-${t.type}">
                    <div class="toast-icon toast-icon-${t.type}">${t.type === 'success' ? '‚úì' : t.type === 'error' ? '‚úï' : t.type === 'warn' ? '!' : 'i'}</div>
                    <div class="toast-content">
                        <div class="toast-title">${t.title}</div>
                        ${t.msg ? `<div class="toast-msg">${t.msg}</div>` : ''}
                    </div>
                    <button class="toast-close" onclick="removeToast(${t.id})">‚úï</button>
                </div>
            `).join('');
        }

        // MODALES
        function openModal(type, data = null) {
            if (type === 'newEval') modals.newEval = true;
            else if (type === 'export') modals.export = true;
            else if (type === 'dept') modals.dept = data;
            else if (type === 'session') modals.session = data;
            else if (type === 'therapist') modals.therapist = data;
            else if (type === 'resource') modals.resource = data;
            renderModals();
        }

        function closeModal(type) {
            if (type === 'newEval') modals.newEval = false;
            else if (type === 'export') modals.export = false;
            else if (type === 'dept') modals.dept = null;
            else if (type === 'session') modals.session = null;
            else if (type === 'therapist') modals.therapist = null;
            else if (type === 'resource') modals.resource = null;
            renderModals();
        }

        function renderModals() {
            const container = document.getElementById('modal-container');
            let html = '';
            if (modals.newEval) html += renderModalNewEval();
            if (modals.export) html += renderModalExport();
            if (modals.dept) html += renderModalDept(modals.dept);
            if (modals.session) html += renderModalSession(modals.session);
            if (modals.therapist) html += renderModalTherapist(modals.therapist);
            if (modals.resource) html += renderModalResource(modals.resource);
            container.innerHTML = html;
            attachModalEvents();
        }

        // ENV√çO A CORREO Y WHATSAPP
        function sendToEmailAndWhatsApp(formData) {
            const { nombre, empresa, email, cargo, empleados } = formData;
            const subject = `Solicitud de demo de ${nombre} (${empresa})`;
            const body = `Nombre: ${nombre}%0AEmail: ${email}%0AEmpresa: ${empresa}%0ACargo: ${cargo}%0AEmpleados: ${empleados}`;
            window.location.href = `mailto:martingomez9915@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body.replace(/%0A/g, '\n'))}`;
            window.open(`https://wa.me/573183879336?text=${encodeURIComponent('Hola, me interesa una demo de Alma. Aqu√≠ mis datos:\n' + body.replace(/%0A/g, '\n'))}`, '_blank');
            toast('success', 'Solicitud enviada', 'Te contactaremos pronto.');
        }

        // ------------------------------------------------------------
        // FUNCIONES DE RENDERIZADO (versiones simplificadas pero funcionales)
        // ------------------------------------------------------------
        function renderLanding() {
            return `
                <div style="background: ${COLORS.cream}; overflow-x: hidden;">
                    <!-- NAV -->
                    <nav style="position: sticky; top: 0; z-index: 200; background: rgba(246,241,231,.94); backdrop-filter: blur(14px); border-bottom: 1px solid rgba(27,51,41,.08);">
                        <div style="max-width: 1160px; margin: 0 auto; padding: 0 5%; display: flex; align-items: center; height: 66px; gap: 36px;">
                            <div style="display: flex; align-items: center; gap: 9px; flex-shrink: 0;">
                                <div style="width: 34px; height: 34px; background: ${COLORS.forest}; border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                                    <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="${COLORS.sageLight}" stroke-width="2"><path d="M2 22l10-10M16 8c0 0-1.5 6-6 8s-8-2-8-2 1-5 5-7 9 1 9 1z"/></svg>
                                </div>
                                <span class="serif" style="font-size: 22px; font-weight: 700; color: ${COLORS.forest};">Alma</span>
                                <span style="font-size: 10px; color: ${COLORS.slateLight}; letter-spacing: 1.5px; text-transform: uppercase;">Salud Mental</span>
                            </div>
                            <div style="display: flex; gap: 28px; flex: 1;">
                                <span class="nav-item" onclick="setView('landing')">Soluci√≥n</span>
                                <span class="nav-item" onclick="setView('landing')">C√≥mo funciona</span>
                                <span class="nav-item" onclick="setView('landing')">Precios</span>
                                <span class="nav-item" onclick="setView('landing')">Contacto</span>
                            </div>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <button class="btn btn-outline btn-sm" onclick="setView('empresa')">Iniciar sesi√≥n</button>
                                <button class="btn btn-dark btn-sm" onclick="setView('empresa')">Solicitar demo</button>
                            </div>
                        </div>
                    </nav>

                    <!-- HERO -->
                    <section style="max-width: 1160px; margin: 0 auto; padding: 80px 5% 60px; display: grid; grid-template-columns: 1fr 1fr; gap: 70px; align-items: center;">
                        <div class="fade-up">
                            <div class="badge badge-green" style="margin-bottom: 20px; font-size: 12px;">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="${COLORS.sage}" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/></svg>
                                Primera plataforma B2B de salud mental de Colombia
                            </div>
                            <h1 class="serif" style="font-size: clamp(38px,4.5vw,60px); font-weight: 700; line-height: 1.08; color: ${COLORS.forest}; margin-bottom: 22px;">
                                Tu equipo rinde mejor<br />
                                <em style="color: ${COLORS.sage};">cuando est√° bien.</em>
                            </h1>
                            <p style="font-size: 17px; color: ${COLORS.slate}; line-height: 1.75; margin-bottom: 34px; max-width: 440px;">
                                Alma conecta tus empleados con psic√≥logos certificados en menos de 24 horas y entrega a RR.HH. visibilidad real del bienestar organizacional ‚Äî con inteligencia artificial y ROI medible.
                            </p>
                            <div style="display: flex; gap: 12px; flex-wrap: wrap; align-items: center;">
                                <button class="btn btn-primary" style="padding: 14px 30px; font-size: 15px;" onclick="setView('empresa')">
                                    Ver plataforma en vivo <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
                                </button>
                                <button class="btn btn-outline" style="padding: 14px 24px; font-size: 15px;" onclick="setView('empresa')">
                                    Hablar con un experto
                                </button>
                            </div>
                            <div style="display: flex; gap: 24px; margin-top: 36px; flex-wrap: wrap;">
                                <div style="display: flex; align-items: center; gap: 7px;"><span style="font-size: 16px;">üè¢</span><span style="font-size: 12px; color: ${COLORS.slate};">50+ empresas activas</span></div>
                                <div style="display: flex; align-items: center; gap: 7px;"><span style="font-size: 16px;">üá®üá¥</span><span style="font-size: 12px; color: ${COLORS.slate};">Colombia & Latam</span></div>
                                <div style="display: flex; align-items: center; gap: 7px;"><span style="font-size: 16px;">üîí</span><span style="font-size: 12px; color: ${COLORS.slate};">Datos 100% seguros</span></div>
                            </div>
                        </div>
                        <div class="float" style="position: relative;">
                            <div style="background: #fff; border-radius: 28px; padding: 26px; box-shadow: 0 32px 80px rgba(27,51,41,.14); position: relative; z-index: 2;">
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                                    <div><div style="font-size: 12px; color: ${COLORS.slate};">Panel de empresa</div><div class="serif" style="font-size: 20px; font-weight: 700; color: ${COLORS.forest};">Empresa Demo S.A.S</div></div>
                                    <span class="badge badge-green" style="font-size: 11px;">‚óè En vivo</span>
                                </div>
                                <div style="display: flex; gap: 14px; margin-bottom: 18px; align-items: center;">
                                    <div style="position: relative; width: 96px; height: 96px; display: inline-flex; align-items: center; justify-content: center;">
                                        <svg width="96" height="96" style="transform: rotate(-90deg); position: absolute;">
                                            <circle cx="48" cy="48" r="41" fill="none" stroke="rgba(95,168,124,.1)" stroke-width="7"></circle>
                                            <circle cx="48" cy="48" r="41" fill="none" stroke="${COLORS.sage}" stroke-width="7" stroke-dasharray="257.6" stroke-dashoffset="77.3" stroke-linecap="round" style="transition: stroke-dashoffset 1.2s;"></circle>
                                        </svg>
                                        <div style="text-align: center; z-index: 1;"><div class="serif" style="font-size: 21px; font-weight: 700; color: ${COLORS.forest};">76</div><div style="font-size: 9px; color: ${COLORS.slateLight};">bienestar</div></div>
                                    </div>
                                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                                        <div><div style="display: flex; justify-content: space-between; margin-bottom: 4px;"><span style="font-size: 11px; color: ${COLORS.slate};">Satisfacci√≥n</span><span style="font-size: 11px; font-weight: 700; color: ${COLORS.sage};">78%</span></div><div class="prog-track"><div class="prog-fill" style="width: 78%; background: ${COLORS.sage};"></div></div></div>
                                        <div><div style="display: flex; justify-content: space-between; margin-bottom: 4px;"><span style="font-size: 11px; color: ${COLORS.slate};">Carga laboral</span><span style="font-size: 11px; font-weight: 700; color: ${COLORS.amber};">62%</span></div><div class="prog-track"><div class="prog-fill" style="width: 62%; background: ${COLORS.amber};"></div></div></div>
                                        <div><div style="display: flex; justify-content: space-between; margin-bottom: 4px;"><span style="font-size: 11px; color: ${COLORS.slate};">Relaciones</span><span style="font-size: 11px; font-weight: 700; color: ${COLORS.forestLight};">84%</span></div><div class="prog-track"><div class="prog-fill" style="width: 84%; background: ${COLORS.forestLight};"></div></div></div>
                                    </div>
                                </div>
                                <div style="background: ${COLORS.cream}; border-radius: 13px; padding: 11px 14px; display: flex; gap: 10px; align-items: center;">
                                    <div style="width: 34px; height: 34px; background: ${COLORS.danger}22; border-radius: 9px; display: flex; align-items: center; justify-content: center;">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${COLORS.danger}" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                                    </div>
                                    <div><div style="font-size: 12px; font-weight: 600; color: ${COLORS.forest};">Alerta detectada por IA</div><div style="font-size: 11px; color: ${COLORS.slate};">Dep. Comercial ¬∑ Estr√©s elevado esta semana</div></div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- METRICS STRIP -->
                    <div style="background: ${COLORS.forest}; padding: 46px 5%;">
                        <div style="max-width: 1160px; margin: 0 auto; display: grid; grid-template-columns: repeat(4,1fr); gap: 20px;">
                            <div style="text-align: center;"><div class="serif" style="font-size: 46px; font-weight: 700; color: ${COLORS.sageLight};">67%</div><div style="font-size: 14px; font-weight: 600; color: #fff;">Reducci√≥n de ausentismo</div><div style="font-size: 12px; color: rgba(168,212,180,.55);">Promedio en clientes piloto</div></div>
                            <div style="text-align: center;"><div class="serif" style="font-size: 46px; font-weight: 700; color: ${COLORS.sageLight};">2.9√ó</div><div style="font-size: 14px; font-weight: 600; color: #fff;">Retorno de inversi√≥n</div><div style="font-size: 12px; color: rgba(168,212,180,.55);">Primeros 12 meses</div></div>
                            <div style="text-align: center;"><div class="serif" style="font-size: 46px; font-weight: 700; color: ${COLORS.sageLight};">24h</div><div style="font-size: 14px; font-weight: 600; color: #fff;">Primera cita disponible</div><div style="font-size: 12px; color: rgba(168,212,180,.55);">Desde la activaci√≥n</div></div>
                            <div style="text-align: center;"><div class="serif" style="font-size: 46px; font-weight: 700; color: ${COLORS.sageLight};">94%</div><div style="font-size: 14px; font-weight: 600; color: #fff;">Satisfacci√≥n empleados</div><div style="font-size: 12px; color: rgba(168,212,180,.55);">NPS promedio Alma</div></div>
                        </div>
                    </div>

                    <!-- FEATURES -->
                    <section style="max-width: 1160px; margin: 0 auto; padding: 80px 5%;">
                        <div style="text-align: center; margin-bottom: 50px;">
                            <div class="badge badge-green" style="margin-bottom: 14px;">Plataforma completa</div>
                            <h2 class="serif" style="font-size: clamp(28px,3.5vw,44px); font-weight: 700; color: ${COLORS.forest};">Todo lo que necesitas<br />en un solo lugar</h2>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(2,1fr); gap: 14px;">
                            <div class="card card-hover" style="padding: 28px;">
                                <div style="display: flex; gap: 16px;"><div style="width: 48px; height: 48px; background: ${COLORS.cream}; border-radius: 14px; display: flex; align-items: center; justify-content: center;"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="${COLORS.sage}" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg></div><div><div class="serif" style="font-size: 18px; font-weight: 700; color: ${COLORS.forest};">Dashboard en tiempo real</div><div style="font-size: 13px; color: ${COLORS.slate};">Visualiza el bienestar de toda la organizaci√≥n con m√©tricas anonimizadas, alertas tempranas de burnout y tendencias por departamento.</div></div></div>
                            </div>
                            <div class="card card-hover" style="padding: 28px;">
                                <div style="display: flex; gap: 16px;"><div style="width: 48px; height: 48px; background: ${COLORS.cream}; border-radius: 14px; display: flex; align-items: center; justify-content: center;"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="${COLORS.sage}" stroke-width="2"><path d="M12 2a4 4 0 014 4v2a4 4 0 014 4 4 4 0 01-4 4v2a4 4 0 01-8 0v-2a4 4 0 01-4-4 4 4 0 014-4V6a4 4 0 014-4z"/></svg></div><div><div class="serif" style="font-size: 18px; font-weight: 700; color: ${COLORS.forest};">Matching inteligente con IA</div><div style="font-size: 13px; color: ${COLORS.slate};">Nuestro algoritmo analiza el perfil emocional y conecta con el psic√≥logo m√°s adecuado.</div></div></div>
                            </div>
                        </div>
                    </section>

                    <!-- CONTACT FORM -->
                    <section style="background: ${COLORS.creamDark}; padding: 80px 5%;">
                        <div style="max-width: 580px; margin: 0 auto; text-align: center;">
                            <div class="badge badge-green" style="margin-bottom: 16px;">Hablemos</div>
                            <h2 class="serif" style="font-size: clamp(28px,3.5vw,42px); font-weight: 700; color: ${COLORS.forest}; margin-bottom: 12px;">Agenda una demo gratuita</h2>
                            <p style="font-size: 15px; color: ${COLORS.slate}; margin-bottom: 36px;">En 30 minutos te mostramos c√≥mo Alma puede transformar el bienestar de tu equipo.</p>
                            <form id="demoForm" onsubmit="return handleDemoSubmit(event)">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 14px;">
                                    <div class="form-group"><label class="field-label">Nombre</label><input class="field" id="nombre" placeholder="Tu nombre" required></div>
                                    <div class="form-group"><label class="field-label">Empresa</label><input class="field" id="empresa" placeholder="Nombre de la empresa" required></div>
                                </div>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 14px; margin-top: 14px;">
                                    <div class="form-group"><label class="field-label">Email corporativo</label><input class="field" type="email" id="email" placeholder="tu@empresa.com" required></div>
                                    <div class="form-group"><label class="field-label">Cargo</label><input class="field" id="cargo" placeholder="Director RR.HH., CEO..."></div>
                                </div>
                                <div class="form-group" style="margin-top: 14px;">
                                    <label class="field-label">N√∫mero de empleados</label>
                                    <select class="field" id="empleados" required>
                                        <option value="">Selecciona un rango</option>
                                        <option>50‚Äì200</option><option>200‚Äì500</option><option>500‚Äì1.000</option><option>+1.000</option>
                                    </select>
                                </div>
                                <button type="submit" class="btn btn-primary" style="width: 100%; padding: 15px; font-size: 15px; margin-top: 20px;">
                                    Solicitar demo gratuita <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
                                </button>
                                <p style="font-size: 11px; color: ${COLORS.slateLight}; margin-top: 14px;">
                                    <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="${COLORS.slateLight}" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg>
                                    Tus datos est√°n protegidos. No los compartimos con terceros.
                                </p>
                            </form>
                        </div>
                    </section>

                    <!-- FOOTER -->
                    <footer style="background: ${COLORS.dark}; padding: 36px 5%;">
                        <div style="max-width: 1160px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap;">
                            <div style="display: flex; align-items: center; gap: 9px;">
                                <div style="width: 28px; height: 28px; background: ${COLORS.forestMid}; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="${COLORS.sageLight}" stroke-width="2"><path d="M2 22l10-10M16 8c0 0-1.5 6-6 8s-8-2-8-2 1-5 5-7 9 1 9 1z"/></svg>
                                </div>
                                <span class="serif" style="font-size: 19px; font-weight: 700; color: #fff;">Alma</span>
                            </div>
                            <span style="font-size: 12px; color: rgba(255,255,255,.3);">¬© 2025 Alma Salud Mental S.A.S ¬∑ Bogot√°, Colombia</span>
                            <div style="display: flex; gap: 18px;">
                                <span style="font-size: 12px; color: rgba(255,255,255,.3); cursor: pointer;" onmouseover="this.style.color='#fff'" onmouseout="this.style.color='rgba(255,255,255,.3)'">Privacidad</span>
                                <span style="font-size: 12px; color: rgba(255,255,255,.3); cursor: pointer;" onmouseover="this.style.color='#fff'" onmouseout="this.style.color='rgba(255,255,255,.3)'">T√©rminos</span>
                            </div>
                        </div>
                    </footer>
                </div>
            `;
        }

        function renderHRDashboard() {
            return `<div style="height: 100vh; display: flex; flex-direction: column; background: #f0ead9; overflow: hidden;">
                <div style="background: #fff; border-bottom: 1px solid rgba(27,51,41,.08); padding: 0 24px; display: flex; align-items: center; height: 58px; gap: 16px;">
                    <div style="display: flex; align-items: center; gap: 8px; cursor: pointer;" onclick="setView('landing')">
                        <div style="width: 30px; height: 30px; background: ${COLORS.forest}; border-radius: 9px; display: flex; align-items: center; justify-content: center;">
                            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="${COLORS.sageLight}" stroke-width="2"><path d="M2 22l10-10M16 8c0 0-1.5 6-6 8s-8-2-8-2 1-5 5-7 9 1 9 1z"/></svg>
                        </div>
                        <span class="serif" style="font-size: 19px; font-weight: 700; color: ${COLORS.forest};">Alma</span>
                    </div>
                    <div style="height: 18px; width: 1px; background: rgba(27,51,41,.1);"></div>
                    <span style="font-size: 12px; color: ${COLORS.slateLight};">Panel de Empresa</span>
                    <div style="flex: 1;"></div>
                    <button class="btn btn-ghost btn-sm" onclick="setView('empleado')">Portal empleado ‚Üí</button>
                    <div style="position: relative;">
                        <button class="btn-icon" onclick="toggleNotifDropdown()">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="${COLORS.slate}" stroke-width="2"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/></svg>
                            ${unreadNotifs > 0 ? '<div class="notif-dot"></div>' : ''}
                        </button>
                        <div id="notifDropdown" class="dropdown-menu hidden" style="width: 340px;">
                            <div style="padding: 12px 16px 8px; border-bottom: 1px solid rgba(27,51,41,.07);">
                                <span style="font-size: 13px; font-weight: 700;">Notificaciones</span>
                            </div>
                            ${NOTIFS.map(n => `
                                <div class="dropdown-item" style="align-items: flex-start; gap: 12px; background: ${n.read ? 'transparent' : 'rgba(95,168,124,.04)'};">
                                    <div style="width: 30px; height: 30px; background: ${n.color}20; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="${n.color}" stroke-width="2">${getIconPath(n.icon)}</svg>
                                    </div>
                                    <div style="flex:1;">
                                        <div style="font-size: 12px; font-weight: 600;">${n.title}</div>
                                        <div style="font-size: 11px; color: ${COLORS.slate};">${n.msg}</div>
                                        <div style="font-size: 10px; color: ${COLORS.slateLight};">${n.time}</div>
                                    </div>
                                    ${!n.read ? '<div style="width:7px; height:7px; background:'+COLORS.sage+'; border-radius:50%;"></div>' : ''}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    <div style="position: relative;">
                        <button class="btn-icon" onclick="toggleProfileDropdown()" style="display: flex; align-items: center; gap: 8px;">
                            <div class="avatar" style="width: 32px; height: 32px; background: ${COLORS.forest}; color: #fff; font-size: 11px;">MG</div>
                            <div style="text-align: left;">
                                <div style="font-size: 12px; font-weight: 600;">Mar√≠a Gonz√°lez</div>
                                <div style="font-size: 10px; color: ${COLORS.slateLight};">Directora RR.HH.</div>
                            </div>
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="${COLORS.slateLight}" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                        </button>
                        <div id="profileDropdown" class="dropdown-menu hidden">
                            <div style="padding: 12px 16px 10px;">
                                <div style="font-size: 13px; font-weight: 600;">Mar√≠a Gonz√°lez</div>
                                <div style="font-size: 11px; color: ${COLORS.slate};">maria@empresademo.com</div>
                            </div>
                            <div class="dropdown-sep"></div>
                            <div class="dropdown-item" onclick="toast('info','Pr√≥ximamente','Configuraci√≥n en desarrollo.'); toggleProfileDropdown()"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="${COLORS.slate}" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z"/></svg>Configuraci√≥n</div>
                            <div class="dropdown-item" onclick="toast('info','Pr√≥ximamente','Exportaci√≥n en desarrollo.'); toggleProfileDropdown()"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="${COLORS.slate}" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>Exportar datos</div>
                            <div class="dropdown-sep"></div>
                            <div class="dropdown-item" onclick="setView('landing'); toggleProfileDropdown()"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="${COLORS.danger}" stroke-width="2"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg><span style="color: ${COLORS.danger};">Cerrar sesi√≥n</span></div>
                        </div>
                    </div>
                </div>
                <div style="display: flex; flex: 1; overflow: hidden;">
                    <aside style="width: 210px; background: #fff; border-right: 1px solid rgba(27,51,41,.06); padding: 18px 12px;">
                        <div style="font-size: 9px; letter-spacing: 2px; text-transform: uppercase; color: ${COLORS.slateLight}; padding: 0 10px; margin-bottom: 8px;">Principal</div>
                        <button class="snav-item active" onclick="setTab('overview')"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${COLORS.sage}" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>Resumen</button>
                        <button class="snav-item" onclick="setTab('depts')"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${COLORS.slateLight}" stroke-width="2"><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="9" y1="22" x2="9" y2="12"/><line x1="15" y1="22" x2="15" y2="12"/><rect x="9" y="12" width="6" height="10"/><line x1="9" y1="7" x2="9" y2="7"/><line x1="15" y1="7" x2="15" y2="7"/></svg>Departamentos</button>
                        <button class="snav-item" onclick="setTab('sessions')"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${COLORS.slateLight}" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Sesiones</button>
                        <button class="snav-item" onclick="setTab('therapists')"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${COLORS.slateLight}" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>Psic√≥logos</button>
                        <button class="snav-item" onclick="setTab('roi')"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${COLORS.slateLight}" stroke-width="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>ROI & Impacto</button>
                        <div style="flex:1;"></div>
                        <div style="background: ${COLORS.cream}; border-radius: 13px; padding: 14px; margin-top: 10px;">
                            <div style="font-size: 11px; font-weight: 700; color: ${COLORS.forest};">Plan Profesional</div>
                            <div style="font-size: 10px; color: ${COLORS.slate};">318 empleados activos<br>Renueva en 142 d√≠as</div>
                            <div class="prog-track" style="margin-top: 8px;"><div class="prog-fill" style="width: 61%; background: ${COLORS.sage};"></div></div>
                        </div>
                    </aside>
                    <main style="flex: 1; overflow-y: auto; padding: 26px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                            <div><h1 class="serif" style="font-size: 26px; font-weight: 700; color: ${COLORS.forest};">Resumen General</h1><div style="font-size: 12px; color: ${COLORS.slateLight};">Empresa Demo S.A.S ¬∑ Junio 2025</div></div>
                            <div><button class="btn btn-outline btn-sm" onclick="openModal('export')"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>Exportar</button></div>
                        </div>
                        <!-- alertas -->
                        ${alerts.map(a => `
                            <div style="background: ${COLORS.dangerLight}; border: 1px solid rgba(212,95,95,.2); border-radius: 13px; padding: 13px 16px; margin-bottom: 16px; display: flex; align-items: center; gap: 12px;">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="${COLORS.danger}" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                                <div style="flex:1;"><span style="font-size: 13px; font-weight: 700;">Dep. ${a.dept} ¬∑ </span><span style="font-size: 13px; color: ${COLORS.slate};">${a.msg}</span></div>
                                <button class="btn btn-danger btn-sm" onclick="dismissAlert(${a.id})">Archivar</button>
                            </div>
                        `).join('')}
                        <!-- stats -->
                        <div style="display: grid; grid-template-columns: repeat(4,1fr); gap: 14px; margin-bottom: 20px;">
                            <div class="stat-card"><div style="display: flex; justify-content: space-between;"><span style="font-size: 11px; color: ${COLORS.slateLight};">√çndice de Bienestar</span><div style="width:30px; height:30px; background:${COLORS.cream}; border-radius:8px; display:flex; align-items:center; justify-content:center;"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="${COLORS.sage}" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/></svg></div></div><div style="display: flex; align-items: baseline;"><span class="stat-value">74</span><span style="font-size:14px; color:${COLORS.slateLight};">/100</span></div><div class="stat-delta delta-up">‚Üë +6 vs mes anterior</div></div>
                            <div class="stat-card"><div style="display: flex; justify-content: space-between;"><span style="font-size: 11px; color: ${COLORS.slateLight};">Sesiones este mes</span><div style="width:30px; height:30px; background:${COLORS.cream}; border-radius:8px; display:flex; align-items:center; justify-content:center;"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="${COLORS.sage}" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></div></div><div><span class="stat-value">147</span></div><div class="stat-delta delta-up">‚Üë +23% vs mayo</div></div>
                            <div class="stat-card"><div style="display: flex; justify-content: space-between;"><span style="font-size: 11px; color: ${COLORS.slateLight};">Empleados activos</span><div style="width:30px; height:30px; background:${COLORS.cream}; border-radius:8px; display:flex; align-items:center; justify-content:center;"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="${COLORS.sage}" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg></div></div><div style="display: flex; align-items: baseline;"><span class="stat-value">318</span><span style="font-size:14px; color:${COLORS.slateLight};">/340</span></div><div class="stat-delta delta-up">93.5% de adopci√≥n</div></div>
                            <div class="stat-card"><div style="display: flex; justify-content: space-between;"><span style="font-size: 11px; color: ${COLORS.slateLight};">Riesgo de rotaci√≥n</span><div style="width:30px; height:30px; background:${COLORS.cream}; border-radius:8px; display:flex; align-items:center; justify-content:center;"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="${COLORS.sage}" stroke-width="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg></div></div><div style="display: flex; align-items: baseline;"><span class="stat-value">12</span><span style="font-size:14px; color:${COLORS.slateLight};">%</span></div><div class="stat-delta delta-up">‚Üì ‚àí8pp vs Q1</div></div>
                        </div>
                        <!-- gr√°fico simulado -->
                        <div class="card" style="padding: 22px; margin-bottom: 16px;">
                            <div style="display: flex; justify-content: space-between;"><div class="serif" style="font-size: 17px; font-weight: 700;">Evoluci√≥n del Bienestar</div><span class="badge badge-forest">√öltimos 6 meses</span></div>
                            <div style="height: 120px; background: linear-gradient(90deg, ${COLORS.sage}20, ${COLORS.sage}40); border-radius: 8px; margin: 10px 0; display: flex; align-items: flex-end; padding: 0 10px;">
                                <div style="width: 16%; height: 62%; background: ${COLORS.sage}; margin-right: 4%; border-radius: 5px 5px 0 0;"></div>
                                <div style="width: 16%; height: 65%; background: ${COLORS.sage}; margin-right: 4%; border-radius: 5px 5px 0 0;"></div>
                                <div style="width: 16%; height: 68%; background: ${COLORS.sage}; margin-right: 4%; border-radius: 5px 5px 0 0;"></div>
                                <div style="width: 16%; height: 67%; background: ${COLORS.sage}; margin-right: 4%; border-radius: 5px 5px 0 0;"></div>
                                <div style="width: 16%; height: 72%; background: ${COLORS.sage}; margin-right: 4%; border-radius: 5px 5px 0 0;"></div>
                                <div style="width: 16%; height: 76%; background: ${COLORS.sage}; border-radius: 5px 5px 0 0;"></div>
                            </div>
                            <div style="display: flex; justify-content: space-between;"><span style="font-size:10px;">Ene</span><span>Feb</span><span>Mar</span><span>Abr</span><span>May</span><span>Jun</span></div>
                        </div>
                        <!-- tabla sesiones -->
                        <div class="card" style="padding: 22px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 16px;">
                                <div class="serif" style="font-size: 17px; font-weight: 700;">Pr√≥ximas Sesiones</div>
                                <button class="btn btn-ghost btn-sm" onclick="setTab('sessions')">Ver todas ‚Üí</button>
                            </div>
                            <table class="tbl">
                                <thead><tr><th>Empleado</th><th>Departamento</th><th>Psic√≥logo</th><th>Horario</th><th>Estado</th><th>Tipo</th></tr></thead>
                                <tbody>
                                    ${SESSIONS.slice(0,4).map(s => `
                                        <tr style="cursor:pointer;" onclick="openModal('session', ${JSON.stringify(s).replace(/"/g, '&quot;')})">
                                            <td><div style="display:flex; align-items:center; gap:9px;"><div class="avatar" style="width:28px; height:28px; background:${COLORS.sage}; color:#fff; font-size:10px;">${s.av}</div><span style="font-weight:500;">${s.emp}</span></div></td>
                                            <td><span style="color:${COLORS.slate};">${s.dept}</span></td>
                                            <td>${s.th}</td>
                                            <td><span style="color:${COLORS.slate};">${s.time}</span></td>
                                            <td><span class="badge ${s.status === 'confirmada' ? 'badge-green' : s.status === 'pendiente' ? 'badge-amber' : 'badge-red'}">${s.status === 'confirmada' ? '‚úì Confirmada' : s.status === 'pendiente' ? '‚è≥ Pendiente' : '‚úï Cancelada'}</span></td>
                                            <td><span class="badge badge-forest">${s.type}</span></td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </main>
                </div>
            </div>`;
        }

        function renderEmployeePortal() {
            return `<div style="background: ${COLORS.cream}; min-height: 100vh;">
                <nav style="background: #fff; border-bottom: 1px solid rgba(27,51,41,.08); padding: 0 5%; display: flex; align-items: center; height: 60px;">
                    <div style="display: flex; align-items: center; gap: 8px; cursor: pointer;" onclick="setView('landing')">
                        <div style="width:30px; height:30px; background:${COLORS.forest}; border-radius:9px; display:flex; align-items:center; justify-content:center;">
                            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="${COLORS.sageLight}" stroke-width="2"><path d="M2 22l10-10M16 8c0 0-1.5 6-6 8s-8-2-8-2 1-5 5-7 9 1 9 1z"/></svg>
                        </div>
                        <span class="serif" style="font-size:19px; font-weight:700; color:${COLORS.forest};">Alma</span>
                    </div>
                    <div style="height:18px; width:1px; background:rgba(27,51,41,.1); margin-left:16px;"></div>
                    <span style="font-size:12px; color:${COLORS.slateLight}; margin-left:16px;">Mi Bienestar</span>
                    <div style="flex:1;"></div>
                    <button class="btn btn-ghost btn-sm" onclick="setView('empresa')">Panel empresa ‚Üí</button>
                    <div style="position:relative;">
                        <button class="btn-icon" style="display:flex; align-items:center; gap:8px;" onclick="toggleProfileDropdown()">
                            <div class="avatar" style="width:32px; height:32px; background:${COLORS.sage}; color:#fff; font-size:11px;">LM</div>
                            <div style="text-align:left;">
                                <div style="font-size:12px; font-weight:600;">Laura Mart√≠nez</div>
                                <div style="font-size:10px; color:${COLORS.slateLight};">Dep. Comercial</div>
                            </div>
                            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="${COLORS.slateLight}" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                        </button>
                        <div id="profileDropdown" class="dropdown-menu hidden">
                            <div style="padding:12px 16px 10px;"><div style="font-size:13px; font-weight:600;">Laura Mart√≠nez</div><div style="font-size:11px; color:${COLORS.slate};">laura@empresademo.com</div></div>
                            <div class="dropdown-sep"></div>
                            <div class="dropdown-item" onclick="toast('info','Pr√≥ximamente','Editar perfil en desarrollo.'); toggleProfileDropdown()"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="${COLORS.slate}" stroke-width="2"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>Editar perfil</div>
                            <div class="dropdown-sep"></div>
                            <div class="dropdown-item" onclick="setView('landing'); toggleProfileDropdown()"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="${COLORS.danger}" stroke-width="2"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg><span style="color:${COLORS.danger};">Cerrar sesi√≥n</span></div>
                        </div>
                    </div>
                </nav>
                <div style="max-width:720px; margin:0 auto; padding:30px 20px 60px;">
                    <div class="fade-in">
                        <div style="background:${COLORS.forest}; border-radius:22px; padding:26px 28px; margin-bottom:18px; display:flex; gap:20px;">
                            <div style="flex:1;"><div class="serif" style="font-size:26px; font-weight:700; color:#fff;">Hola, Laura üåø</div><div style="font-size:14px; color:rgba(168,212,180,.8);">Esta semana tienes 2 sesiones disponibles. Tu evaluaci√≥n semanal est√° pendiente.</div></div>
                            <div style="text-align:center;"><div style="position:relative; width:88px; height:88px;"><svg width="88" height="88" style="transform:rotate(-90deg); position:absolute;"><circle cx="44" cy="44" r="37" fill="none" stroke="rgba(95,168,124,.1)" stroke-width="7"/><circle cx="44" cy="44" r="37" fill="none" stroke="${COLORS.sageLight}" stroke-width="7" stroke-dasharray="232.5" stroke-dashoffset="69.7"/></svg><div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);"><div class="serif" style="font-size:22px; font-weight:700; color:#fff;">73</div><div style="font-size:8px; color:${COLORS.sageLight};">tu score</div></div></div></div>
                        </div>
                        <div style="display:grid; grid-template-columns:1fr 1fr; gap:14px; margin-bottom:18px;">
                            <button class="btn btn-primary" style="background:${COLORS.sage}; border:none; border-radius:18px; padding:22px; text-align:left;" onclick="toast('info','Evaluaci√≥n','Funcionalidad en desarrollo.')">
                                <div style="font-size:26px;">‚ú¶</div><div class="serif" style="font-size:18px; font-weight:700; color:#fff;">Evaluaci√≥n semanal</div><div style="font-size:12px; color:rgba(255,255,255,.7);">8 min ¬∑ Pendiente esta semana</div>
                            </button>
                            <button class="btn" style="background:#fff; border:1.5px solid ${COLORS.sage}; border-radius:18px; padding:22px; text-align:left;" onclick="toast('info','Agendar','Funcionalidad en desarrollo.')">
                                <div style="font-size:26px;">üìÖ</div><div class="serif" style="font-size:18px; font-weight:700; color:${COLORS.forest};">Agendar sesi√≥n</div><div style="font-size:12px; color:${COLORS.slate};">Citas disponibles hoy</div>
                            </button>
                        </div>
                        <div class="card" style="padding:22px;">
                            <div style="display:flex; justify-content:space-between; margin-bottom:16px;">
                                <div class="serif" style="font-size:17px; font-weight:700;">Mis sesiones</div>
                                <div><button class="btn btn-sm btn-primary" onclick="toast('info','Pr√≥ximas','Viendo pr√≥ximas')">Pr√≥ximas</button><button class="btn btn-sm btn-outline" onclick="toast('info','Historial','Viendo historial')">Historial</button></div>
                            </div>
                            <div><div style="background:${COLORS.cream}; border-radius:13px; padding:14px 16px; display:flex; gap:14px;"><div class="avatar" style="width:42px; height:42px; background:${THERAPISTS[0].color};">${THERAPISTS[0].avatar}</div><div style="flex:1;"><div style="font-size:14px; font-weight:600;">${THERAPISTS[0].name}</div><div style="font-size:12px; color:${COLORS.slate};">Estr√©s laboral</div></div><div style="text-align:right;"><div style="font-size:13px; font-weight:600;">Ma√±ana ¬∑ 10:00 AM</div><span class="badge badge-green">‚úì Confirmada</span></div></div></div>
                        </div>
                    </div>
                </div>
            </div>`;
        }

        // Modales
        function renderModalNewEval() {
            return `<div class="modal-overlay" onclick="if(event.target===this) closeModal('newEval')"><div class="modal-box"><div style="display:flex; justify-content:space-between;"><div><div class="modal-title">Nueva Evaluaci√≥n</div><div class="modal-sub">Env√≠a una evaluaci√≥n de bienestar a tu equipo</div></div><button class="btn-icon" onclick="closeModal('newEval')"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button></div>
                <form onsubmit="event.preventDefault(); toast('success','Evaluaci√≥n enviada','Los empleados recibir√°n la invitaci√≥n por email.'); closeModal('newEval');">
                    <div class="form-group"><label class="field-label">Destinatarios</label><select class="field"><option>Toda la empresa (340 empleados)</option></select></div>
                    <div class="form-group"><label class="field-label">Tipo de evaluaci√≥n</label><select class="field"><option>Evaluaci√≥n general de bienestar</option></select></div>
                    <div class="form-group"><label class="field-label">Fecha de cierre</label><input class="field" type="date" value="2025-07-10"></div>
                    <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:20px;"><button type="button" class="btn btn-outline" onclick="closeModal('newEval')">Cancelar</button><button type="submit" class="btn btn-primary">Enviar evaluaci√≥n</button></div>
                </form></div></div>`;
        }

        function renderModalExport() {
            return `<div class="modal-overlay" onclick="if(event.target===this) closeModal('export')"><div class="modal-box"><div><div class="modal-title">Exportar Reporte</div><div class="modal-sub">Elige el formato de exportaci√≥n</div></div>
                <div style="display:flex; flex-direction:column; gap:10px;">
                    <button onclick="handleExport('Excel'); closeModal('export')" style="display:flex; align-items:center; gap:14px; padding:14px 16px; border-radius:13px; border:1.5px solid rgba(27,51,41,.1); background:${COLORS.cream}; width:100%;"><span style="font-size:24px;">üìä</span><div><div style="font-size:14px; font-weight:600;">Excel (.xlsx)</div><div style="font-size:12px; color:${COLORS.slate};">Datos tabulares y gr√°ficos editables</div></div></button>
                    <button onclick="handleExport('PDF'); closeModal('export')" style="display:flex; align-items:center; gap:14px; padding:14px 16px; border-radius:13px; border:1.5px solid rgba(27,51,41,.1); background:${COLORS.cream};"><span style="font-size:24px;">üìÑ</span><div><div style="font-size:14px; font-weight:600;">PDF Ejecutivo</div><div style="font-size:12px; color:${COLORS.slate};">Reporte listo para presentar</div></div></button>
                </div></div></div>`;
        }

        function renderModalDept(dept) {
            return `<div class="modal-overlay" onclick="if(event.target===this) closeModal('dept')"><div class="modal-box modal-lg"><div style="display:flex; justify-content:space-between;"><div><div class="modal-title">${dept.name}</div><div class="modal-sub">${dept.employees} empleados ¬∑ ${dept.sessions} sesiones este mes</div></div><button class="btn-icon" onclick="closeModal('dept')"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button></div>
                <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:12px;">
                    <div class="stat-card"><div class="stat-label">Score de bienestar</div><div class="stat-value" style="font-size:28px;">${dept.score}/100</div></div>
                    <div class="stat-card"><div class="stat-label">Riesgo de burnout</div><div class="stat-value" style="font-size:28px;">${dept.burnout}%</div></div>
                    <div class="stat-card"><div class="stat-label">Tendencia mensual</div><div class="stat-value" style="font-size:28px; color:${dept.trend>0?COLORS.sage:COLORS.danger};">${dept.trend>0?'+':''}${dept.trend}%</div></div>
                </div>
                <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:20px;"><button class="btn btn-outline" onclick="closeModal('dept')">Cerrar</button><button class="btn btn-primary" onclick="closeModal('dept'); openModal('newEval');">Enviar evaluaci√≥n a este dep.</button></div></div></div>`;
        }

        function renderModalSession(session) {
            return `<div class="modal-overlay" onclick="if(event.target===this) closeModal('session')"><div class="modal-box"><div><div class="modal-title">Detalle de sesi√≥n</div><div class="modal-sub">${session.emp} ¬∑ ${session.time}</div></div>
                <div style="background:${COLORS.cream}; border-radius:13px; padding:16px; display:flex; gap:12px;">
                    <div class="avatar" style="width:44px; height:44px; background:${COLORS.sage};">${session.av}</div>
                    <div><div style="font-size:15px; font-weight:700;">${session.emp}</div><div style="font-size:12px; color:${COLORS.slate};">${session.dept} ¬∑ ${session.type}</div></div>
                    <span class="badge ${session.status==='confirmada'?'badge-green':session.status==='pendiente'?'badge-amber':'badge-red'}" style="margin-left:auto;">${session.status==='confirmada'?'‚úì Confirmada':session.status==='pendiente'?'‚è≥ Pendiente':'‚úï Cancelada'}</span>
                </div>
                <div style="margin-top:16px;"><div style="display:flex; justify-content:space-between; padding:10px 0;"><span style="font-size:13px; color:${COLORS.slate};">Psic√≥logo asignado</span><span style="font-weight:500;">${session.th}</span></div><div style="display:flex; justify-content:space-between; padding:10px 0;"><span style="font-size:13px; color:${COLORS.slate};">Horario</span><span>${session.time}</span></div></div>
                <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:16px;"><button class="btn btn-danger" onclick="closeModal('session'); toast('warn','Sesi√≥n cancelada','El empleado fue notificado.')">Cancelar sesi√≥n</button><button class="btn btn-primary" onclick="closeModal('session'); toast('success','Recordatorio enviado','El empleado recibi√≥ un recordatorio.')">Enviar recordatorio</button></div></div></div>`;
        }

        function renderModalTherapist(th) {
            return `<div class="modal-overlay" onclick="if(event.target===this) closeModal('therapist')"><div class="modal-box modal-lg"><div><div class="modal-title">${th.name}</div><div class="modal-sub">${th.spec}</div></div>
                <div style="display:flex; gap:16px; margin:16px 0;">
                    <div class="avatar" style="width:64px; height:64px; background:${th.color}; font-size:22px;">${th.avatar}</div>
                    <div><div style="display:flex; gap:12px;"><span class="badge badge-amber">‚òÖ ${th.rating}</span><span class="badge badge-forest">Exp: ${th.exp}</span><span class="badge badge-blue">${th.lang}</span></div><div style="margin-top:8px; font-size:13px; color:${COLORS.slate};">Psic√≥loga cl√≠nica con m√°s de ${th.sessions} sesiones realizadas.</div></div>
                </div>
                <div style="display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-bottom:16px;">
                    <div class="stat-card"><div class="stat-value" style="font-size:26px;">${th.sessions}</div><div class="stat-label">Sesiones</div></div>
                    <div class="stat-card"><div class="stat-value" style="font-size:26px;">96%</div><div class="stat-label">Tasa de √©xito</div></div>
                    <div class="stat-card"><div class="stat-value" style="font-size:26px;">Hoy</div><div class="stat-label">Disponibilidad</div></div>
                </div>
                <div style="display:flex; gap:10px; justify-content:flex-end;"><button class="btn btn-outline" onclick="closeModal('therapist')">Cerrar</button><button class="btn btn-primary" onclick="closeModal('therapist'); setView('empleado');">Agendar sesi√≥n</button></div></div></div>`;
        }

        function renderModalResource(r) {
            return `<div class="modal-overlay" onclick="if(event.target===this) closeModal('resource')"><div class="modal-box"><div><div class="modal-title">${r.title}</div><div class="modal-sub">${r.sub}</div></div>
                <div style="background:${COLORS.cream}; border-radius:14px; padding:24px; text-align:center; margin-bottom:20px;"><span style="font-size:52px;">${r.icon}</span><span class="badge badge-green">${r.tag}</span><div style="font-size:12px; color:${COLORS.slateLight};">${r.time} ¬∑ Contenido verificado</div></div>
                <p style="font-size:14px; color:${COLORS.slate};">Recurso dise√±ado por psic√≥logos para ayudarte a gestionar el bienestar.</p>
                <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:20px;"><button class="btn btn-outline" onclick="closeModal('resource')">Cerrar</button><button class="btn btn-primary" onclick="closeModal('resource'); toast('success','¬°Recurso iniciado!','Disfruta este momento para ti.')"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>Comenzar ahora</button></div></div></div>`;
        }

        // Utilidades
        function getIconPath(icon) {
            const paths = {
                alert: 'M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0zM12 9v4M12 17h.01',
                cal: 'M3 4h18v18H3V4zM16 2v4M8 2v4M3 10h18',
                trend: 'M23 6l-9.5 9.5-5-5L1 18',
                users: 'M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M9 7a4 4 0 100-8 4 4 0 000 8zM23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75',
            };
            return paths[icon] || '';
        }

        function handleDemoSubmit(e) {
            e.preventDefault();
            const formData = {
                nombre: document.getElementById('nombre').value,
                empresa: document.getElementById('empresa').value,
                email: document.getElementById('email').value,
                cargo: document.getElementById('cargo').value,
                empleados: document.getElementById('empleados').value,
            };
            sendToEmailAndWhatsApp(formData);
            return false;
        }

        function handleExport(format) {
            toast('success', `Reporte exportado en ${format}`, 'El archivo estar√° listo en tu email en unos minutos.');
        }

        function dismissAlert(id) {
            alerts = alerts.filter(a => a.id !== id);
            toast('info', 'Alerta archivada', 'Puedes ver el historial en el panel.');
            renderApp();
        }

        function toggleNotifDropdown() {
            const dd = document.getElementById('notifDropdown');
            if (dd) dd.classList.toggle('hidden');
        }

        function toggleProfileDropdown() {
            const dd = document.getElementById('profileDropdown');
            if (dd) dd.classList.toggle('hidden');
        }

        function setTab(tab) {
            toast('info', `Navegando a ${tab}`, 'Funcionalidad en desarrollo.');
        }

        function attachEvents() {
            // No es necesario hacer nada extra, los eventos inline ya est√°n
        }

        function attachModalEvents() {
            // Los eventos de los modales ya est√°n en los onclick
        }

        // Inicializaci√≥n
        window.onload = () => {
            renderApp();
            window.toast = toast;
            window.removeToast = removeToast;
            window.setView = setView;
            window.openModal = openModal;
            window.closeModal = closeModal;
            window.handleDemoSubmit = handleDemoSubmit;
            window.handleExport = handleExport;
            window.dismissAlert = dismissAlert;
            window.toggleNotifDropdown = toggleNotifDropdown;
            window.toggleProfileDropdown = toggleProfileDropdown;
            window.setTab = setTab;
            window.getIconPath = getIconPath;
            window.SESSIONS = SESSIONS;
            window.THERAPISTS = THERAPISTS;
            window.DEPTS = DEPTS;
        };
    </script>
</body>
</html>